___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Meta Pixel Webstore",
  "brand": {
    "id": "brand_dummy",
    "displayName": "wslojasvirtuais",
    "thumbnail": "data:image/jpeg;base64,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\u003d\u003d"
  },
  "description": "Integração Facebook/Meta Pixel para lojas Webstore.",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "alwaysInSummary": true,
    "valueValidators": [
      {
        "errorMessage": "You must provide a Pixel ID",
        "type": "NON_EMPTY"
      },
      {
        "args": [
          "^[0-9,]+$"
        ],
        "errorMessage": "Invalid Pixel ID format",
        "type": "REGEX"
      }
    ],
    "displayName": "Facebook Pixel ID(s)",
    "simpleValueType": true,
    "name": "pixelId",
    "type": "TEXT",
    "valueHint": "e.g. 12345678910"
  },
  {
    "type": "CHECKBOX",
    "name": "enhancedEcommerce",
    "checkboxText": "Enhanced Ecommerce dataLayer Integration",
    "simpleValueType": true,
    "help": "If you check this, then the Facebook pixel will populate \u003cstrong\u003eEvent Name\u003c/strong\u003e and \u003cstrong\u003eObject Properties\u003c/strong\u003e automatically from the last \u003ca href\u003d\"https://developers.google.com/tag-manager/enhanced-ecommerce\"\u003eecommerce\u003c/a\u003e object pushed into the dataLayer array."
  },
  {
    "type": "RADIO",
    "name": "eventName",
    "displayName": "Event Name",
    "radioItems": [
      {
        "value": "standard",
        "displayValue": "Standard",
        "subParams": [
          {
            "type": "SELECT",
            "name": "standardEventName",
            "macrosInSelect": false,
            "selectItems": [
              {
                "displayValue": "PageView",
                "value": "PageView"
              },
              {
                "displayValue": "AddPaymentInfo",
                "value": "AddPaymentInfo"
              },
              {
                "displayValue": "AddToCart",
                "value": "AddToCart"
              },
              {
                "displayValue": "AddToWishlist",
                "value": "AddToWishlist"
              },
              {
                "displayValue": "CompleteRegistration",
                "value": "CompleteRegistration"
              },
              {
                "displayValue": "Contact",
                "value": "Contact"
              },
              {
                "displayValue": "CustomizeProduct",
                "value": "CustomizeProduct"
              },
              {
                "displayValue": "Donate",
                "value": "Donate"
              },
              {
                "displayValue": "FindLocation",
                "value": "FindLocation"
              },
              {
                "displayValue": "InitiateCheckout",
                "value": "InitiateCheckout"
              },
              {
                "displayValue": "Lead",
                "value": "Lead"
              },
              {
                "displayValue": "Purchase",
                "value": "Purchase"
              },
              {
                "displayValue": "Schedule",
                "value": "Schedule"
              },
              {
                "displayValue": "Search",
                "value": "Search"
              },
              {
                "displayValue": "StartTrial",
                "value": "StartTrial"
              },
              {
                "displayValue": "SubmitApplication",
                "value": "SubmitApplication"
              },
              {
                "displayValue": "Subscribe",
                "value": "Subscribe"
              },
              {
                "displayValue": "ViewContent",
                "value": "ViewContent"
              }
            ],
            "simpleValueType": true,
            "defaultValue": "PageView"
          }
        ]
      },
      {
        "value": "custom",
        "displayValue": "Custom",
        "subParams": [
          {
            "type": "TEXT",
            "name": "customEventName",
            "displayName": "",
            "simpleValueType": true
          }
        ]
      },
      {
        "value": "variable",
        "displayValue": "Variable",
        "subParams": [
          {
            "type": "SELECT",
            "name": "variableEventName",
            "macrosInSelect": true,
            "selectItems": [],
            "simpleValueType": true
          }
        ]
      }
    ],
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "enhancedEcommerce",
        "paramValue": true,
        "type": "NOT_EQUALS"
      }
    ]
  },
  {
    "type": "RADIO",
    "name": "eecEventName",
    "displayName": "Event Name",
    "radioItems": [
      {
        "value": "eec",
        "displayValue": "Set automatically from dataLayer"
      }
    ],
    "simpleValueType": true,
    "help": "The Enhanced Ecommerce integration populates the Event Name automatically depending on what type of \u003cstrong\u003eecommerce\u003c/strong\u003e object was last pushed into dataLayer (\"detail\" -\u003e \"ViewContent\", \"add\" -\u003e \"AddToCart\", \"checkout\" -\u003e \"InitiateCheckout\", \"purchase\" -\u003e \"Purchase\").",
    "enablingConditions": [
      {
        "paramName": "enhancedEcommerce",
        "paramValue": true,
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "SELECT",
    "name": "consent",
    "displayName": "Consent Granted (GDPR)",
    "macrosInSelect": true,
    "selectItems": [
      {
        "value": true,
        "displayValue": "True"
      },
      {
        "value": false,
        "displayValue": "False"
      }
    ],
    "simpleValueType": true,
    "help": "If you set Consent Granted to \u003cstrong\u003efalse\u003c/strong\u003e, the pixel will not send any hits until a tag is fired where Consent Granted is set to \u003cstrong\u003etrue\u003c/strong\u003e. See \u003ca href\u003d\"https://developers.facebook.com/docs/facebook-pixel/implementation/gdpr/\"\u003ethis article\u003c/a\u003e for more information."
  },
  {
    "simpleValueType": true,
    "name": "advancedMatching",
    "checkboxText": "Enable Advanced Matching",
    "type": "CHECKBOX"
  },
  {
    "type": "GROUP",
    "name": "dataProcessingOptionsGroup",
    "displayName": "Data Processing Options",
    "groupStyle": "ZIPPY_CLOSED",
    "subParams": [
      {
        "type": "LABEL",
        "name": "dpoInfo",
        "displayName": "Data Processing Options force this Facebook event to comply to regional regulations with regard to the processing and selling of user data. Read \u003ca href\u003d\"https://developers.facebook.com/docs/marketing-apis/data-processing-options\"\u003ethis\u003c/a\u003e for more information about how to configure this section."
      },
      {
        "type": "CHECKBOX",
        "name": "dpoLDU",
        "checkboxText": "Limited Data Use (LDU)",
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "dpoCountry",
        "displayName": "Country",
        "simpleValueType": true,
        "defaultValue": 0,
        "enablingConditions": [
          {
            "paramName": "dpoLDU",
            "paramValue": true,
            "type": "EQUALS"
          }
        ],
        "valueValidators": [
          {
            "type": "NUMBER"
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "dpoState",
        "displayName": "State",
        "simpleValueType": true,
        "defaultValue": 0,
        "enablingConditions": [
          {
            "paramName": "dpoLDU",
            "paramValue": true,
            "type": "EQUALS"
          }
        ],
        "valueValidators": [
          {
            "type": "NUMBER"
          }
        ]
      }
    ]
  },
  {
    "enablingConditions": [
      {
        "paramName": "advancedMatching",
        "type": "EQUALS",
        "paramValue": true
      }
    ],
    "displayName": "Customer Information Data Parameters",
    "name": "advancedMatchingGroup",
    "groupStyle": "ZIPPY_CLOSED",
    "type": "GROUP",
    "subParams": [
      {
        "displayName": "",
        "name": "advancedMatchingList",
        "simpleTableColumns": [
          {
            "selectItems": [
              {
                "displayValue": "City",
                "value": "ct"
              },
              {
                "displayValue": "Country",
                "value": "cn"
              },
              {
                "displayValue": "Date of Birth",
                "value": "db"
              },
              {
                "displayValue": "Email",
                "value": "em"
              },
              {
                "displayValue": "External ID",
                "value": "external_id"
              },
              {
                "displayValue": "First Name",
                "value": "fn"
              },
              {
                "displayValue": "Gender",
                "value": "ge"
              },
              {
                "displayValue": "Last Name",
                "value": "ln"
              },
              {
                "displayValue": "Phone",
                "value": "ph"
              },
              {
                "displayValue": "State",
                "value": "st"
              },
              {
                "displayValue": "Zip Code",
                "value": "zp"
              }
            ],
            "defaultValue": "",
            "displayName": "Parameter name",
            "name": "name",
            "isUnique": true,
            "type": "SELECT"
          },
          {
            "defaultValue": "",
            "displayName": "Parameter value",
            "name": "value",
            "type": "TEXT"
          }
        ],
        "type": "SIMPLE_TABLE",
        "newRowButtonText": "Add parameter",
        "valueValidators": [
          {
            "type": "NON_EMPTY"
          }
        ]
      }
    ]
  },
  {
    "displayName": "Object Properties",
    "name": "objectPropertiesGroup",
    "groupStyle": "ZIPPY_CLOSED",
    "type": "GROUP",
    "subParams": [
      {
        "type": "LABEL",
        "name": "enhancedEcommerceObject",
        "displayName": "\u003cstrong\u003eWarning!\u003c/strong\u003e Object properties are populated automatically based on the most recent \u003cstrong\u003eecommerce\u003c/strong\u003e object pushed into dataLayer. If you add properties here that are already set by the integration (content_type, contents, num_items, value, currency), then the properties you add here will override those set automatically by the integration!",
        "enablingConditions": [
          {
            "paramName": "enhancedEcommerce",
            "paramValue": true,
            "type": "EQUALS"
          }
        ]
      },
      {
        "type": "SELECT",
        "name": "objectPropertiesFromVariable",
        "displayName": "Load Properties From Variable",
        "macrosInSelect": true,
        "selectItems": [
          {
            "value": false,
            "displayValue": "False"
          }
        ],
        "simpleValueType": true,
        "help": "You can use a variable that returns a JavaScript object with the properties you want to use. This object will be merged with any additional properties you add via the table below. Any conflicts will be resolved in favor of the properties you add to the table."
      },
      {
        "name": "objectPropertyList",
        "simpleTableColumns": [
          {
            "valueValidators": [],
            "defaultValue": "",
            "displayName": "Property Name",
            "name": "name",
            "isUnique": true,
            "type": "TEXT"
          },
          {
            "defaultValue": "",
            "displayName": "Property Value",
            "name": "value",
            "type": "TEXT"
          }
        ],
        "type": "SIMPLE_TABLE",
        "newRowButtonText": "Add property"
      }
    ]
  },
  {
    "displayName": "More Settings",
    "name": "moreSettingsGroup",
    "groupStyle": "ZIPPY_CLOSED",
    "type": "GROUP",
    "subParams": [
      {
        "help": "Facebook collects some metadata (e.g. structured data) and user interactions (e.g. clicks) automatically. Check this box to disable this automatic configuration of the pixel.",
        "simpleValueType": true,
        "name": "disableAutoConfig",
        "checkboxText": "Disable Automatic Configuration",
        "type": "CHECKBOX"
      },
      {
        "type": "CHECKBOX",
        "name": "disablePushState",
        "checkboxText": "Disable History Event Tracking",
        "simpleValueType": true,
        "help": "The Facebook Pixel tracks history events (pushState and replaceState) automatically as PageViews. Check this box to prevent the pixel from tracking such events automatically."
      },
      {
        "type": "TEXT",
        "name": "eventId",
        "displayName": "Event ID",
        "simpleValueType": true,
        "help": "Set the Event ID parameter in case you are tracking the same event server-side as well. The Event ID can be used to deduplicate the same event if sent from multiple sources. See more \u003ca href\u003d\"https://developers.facebook.com/docs/marketing-api/conversions-api/deduplicate-pixel-and-server-events/\"\u003ehere\u003c/a\u003e."
      }
    ]
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

const createQueue = require('createQueue');
const callInWindow = require('callInWindow');
const aliasInWindow = require('aliasInWindow');
const copyFromWindow = require('copyFromWindow');
const setInWindow = require('setInWindow');
const injectScript = require('injectScript');
const makeTableMap = require('makeTableMap');
const makeNumber = require('makeNumber');
const makeInteger = require('makeInteger');
const getType = require('getType');
const copyFromDataLayer = require('copyFromDataLayer');
const math = require('Math');
const log = require('logToConsole');
const addEventCallback = require('addEventCallback');

const initIds = copyFromWindow('_fbq_gtm_ids') || [];
const pixelIds = data.pixelId;
const standardEventNames = ['AddPaymentInfo', 'AddToCart', 'AddToWishlist', 'CompleteRegistration', 'Contact', 'CustomizeProduct', 'Donate', 'FindLocation', 'InitiateCheckout', 'Lead', 'PageView', 'Purchase', 'Schedule', 'Search', 'StartTrial', 'SubmitApplication', 'Subscribe', 'ViewContent'];

// Helper methods
const fail = msg => {
  log(msg);
  data.gtmOnFailure();
};

const mergeObj = (obj, obj2) => {
  for (let key in obj2) {
    if (obj2.hasOwnProperty(key)) {
      obj[key] = obj2[key];
    }
  }
  return obj;
};

// Initialize EEC integration for Facebook Pixel events
let eventName, action, eecObjectProps;
if (data.enhancedEcommerce) {
  action = copyFromDataLayer("event");

  log('TESTEDOGOOGLE', action);
  
  if (action == 'view_item_list') { eventName = 'ViewContent'; }
  if (action == 'view_item') { eventName = 'ViewContent'; }
  if (action == 'begin_checkout') { eventName = 'InitiateCheckout'; }
  if (action == 'search') { eventName = 'Search'; }
  if (action == 'purchase') { eventName = 'Purchase'; }

  log('TESTEDOGOOGLE2', eventName);
  
  let wsProducts = copyFromDataLayer('items') || [];

  log('TESTEDOGOOGLE3', wsProducts);
  
  if (!wsProducts || getType(wsProducts) !== 'array') return fail('Facebook pixel: Most recently pushed "ecommerce" object did not have a valid "products" array.');
  
  log('TESTEDOGOOGLE4');

  eecObjectProps = {
    contents: wsProducts.map(prod => { return {id: prod.item_id, quantity: prod.quantity || 1}; }),
    value: wsProducts.reduce((acc, cur) => {
      const curVal = math.round(makeNumber(cur.price || 0) * (cur.quantity || 1) * 100) / 100;
      return acc + curVal;
    }, 0.0),
    currency: 'BRL'
  };
  
  log('TESTEDOGOOGLE5', eventName == 'ViewContent');
  
  if (eventName == 'ViewContent') {
    eecObjectProps.content_name = copyFromDataLayer('item_list_name') || 'Lista de Produtos';
    eecObjectProps.content_type = 'product';
    log('TESTEGOOGLE5.5', eecObjectProps);
  }
  
  log('TESTEDOGOOGLE6', eventName == 'InitiateCheckout' || eventName == 'Purchase');
  
  if (eventName == 'InitiateCheckout' || eventName == 'Purchase') {
    eecObjectProps.value = copyFromDataLayer('value');
    eecObjectProps.num_items = wsProducts.reduce((acc, cur) => {
      return acc + makeInteger(cur.quantity || 1);
    }, 0);
  }
  
  log('TESTEDOGOOGLE7');
}

// Build the fbq() command arguments
const cidParams = data.advancedMatchingList && data.advancedMatchingList.length ? makeTableMap(data.advancedMatchingList, 'name', 'value') : {};
const objectProps = data.objectPropertyList && data.objectPropertyList.length ? makeTableMap(data.objectPropertyList, 'name', 'value') : {};
const objectPropsFromVar = getType(data.objectPropertiesFromVariable) === 'object' ? data.objectPropertiesFromVariable : {};
const mergedObjectProps = mergeObj(objectPropsFromVar, objectProps);
const finalObjectProps = mergeObj(eecObjectProps || {}, mergedObjectProps);
eventName = eventName || (data.eventName === 'custom' ? data.customEventName : (data.eventName === 'variable' ? data.variableEventName : data.standardEventName));

log('TESTEDOGOOGLE8');

const command = standardEventNames.indexOf(eventName) === -1 ? 'trackSingleCustom' : 'trackSingle';
const consent = data.consent === false ? 'revoke' : 'grant';

log('TESTEDOGOOGLE9');

// Utility function to use either fbq.queue[]
// (if the FB SDK hasn't loaded yet), or fbq.callMethod()
// if the SDK has loaded.
const getFbq = () => {
  // Return the existing 'fbq' global method if available
  let fbq = copyFromWindow('fbq');
  if (fbq) {
    return fbq;
  }
  
  // Initialize the 'fbq' global method to either use
  // fbq.callMethod or fbq.queue)
  setInWindow('fbq', function() {    
    const callMethod = copyFromWindow('fbq.callMethod.apply');
    if (callMethod) {           
      callInWindow('fbq.callMethod.apply', null, arguments); 
    } else {       
      callInWindow('fbq.queue.push', arguments);
    }
  });
  aliasInWindow('_fbq', 'fbq');
  
  // Create the fbq.queue
  createQueue('fbq.queue');
    
  // Return the global 'fbq' method, created above
  return copyFromWindow('fbq');
};

// Get reference to the global method
const fbq = getFbq();
log('TESTEDOGOOGLE10');
fbq('consent', consent);
log('TESTEDOGOOGLE11');
 // Set Data Processing Options
if (data.dpoLDU) {
  fbq('dataProcessingOptions', ['LDU'], makeNumber(data.dpoCountry), makeNumber(data.dpoState));
}
log('TESTEDOGOOGLE12');
// Handle multiple, comma-separated pixel IDs,
// and initialize each ID if not done already.
pixelIds.split(',').forEach(pixelId => {
  if (initIds.indexOf(pixelId) === -1) {
    
    // If the user has chosen to disable automatic configuration
    if (data.disableAutoConfig) {
      fbq('set', 'autoConfig', false, pixelId);
    }
    
    // If the user has chosen to disable pushState and replaceState tracking
    if (data.disablePushState) {
      setInWindow('fbq.disablePushState', true);
    }
   	
    
    // Initialize pixel and store in global array
    fbq('init', pixelId, cidParams);

    // Monitoring agent string for Tag Setup
    fbq('set','agent','tmSimo-GTM-WebTemplate', pixelId);

    initIds.push(pixelId);
    setInWindow('_fbq_gtm_ids', initIds, true);
    
  }

  // Call the fbq() method with the parameters defined earlier
  if (data.eventId) {
    fbq(command, pixelId, eventName, finalObjectProps, {eventID: data.eventId});
  } else {
    fbq(command, pixelId, eventName, finalObjectProps);
  }
});

injectScript('https://connect.facebook.net/en_US/fbevents.js', data.gtmOnSuccess, data.gtmOnFailure, 'fbPixel');


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "read_data_layer",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keyPatterns",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "event"
              },
              {
                "type": 1,
                "string": "items"
              },
              {
                "type": 1,
                "string": "items.*"
              },
              {
                "type": 1,
                "string": "value"
              },
              {
                "type": 1,
                "string": "item_list_name"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "fbq"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "_fbq_gtm"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "_fbq"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "_fbq_gtm_ids"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "fbq.callMethod.apply"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "fbq.queue.push"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "fbq.queue"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "fbq.disablePushState"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://connect.facebook.net/en_US/fbevents.js"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "read_event_metadata",
        "versionId": "1"
      },
      "param": []
    },
    "isRequired": true
  }
]


___TESTS___

scenarios:
- name: Library is injected
  code: |-
    // Call runCode to run the template's code.
    runCode(mockData);

    // Verify that the tag finished successfully.
    assertApi('injectScript').wasCalledWith(scriptUrl, success, failure, 'fbPixel');
    assertApi('gtmOnSuccess').wasCalled();
- name: fbq does not exist - method created
  code: |-
    let fbq;

    mock('copyFromWindow', key => {
      if (key === 'fbq') return fbq;
    });

    mock('createQueue', key => {});

    mock('setInWindow', (key, val) => {
      if (key === 'fbq') fbq = val;
    });

    // Call runCode to run the template's code.
    runCode(mockData);

    // Verify that the tag finished successfully.
    assertApi('aliasInWindow').wasCalledWith('_fbq', 'fbq');
    assertApi('setInWindow').wasCalled();
    assertApi('gtmOnSuccess').wasCalled();
- name: fbq exists - method copied
  code: |-
    mock('setInWindow', key => {
      if (key === 'fbq') fail('setInWindow called with fbq even though variable exists');
    });

    mock('createQueue', key => {});

    // Call runCode to run the template's code.
    runCode(mockData);

    // Verify that the tag finished successfully.
    assertApi('gtmOnSuccess').wasCalled();
- name: makeTableMap called
  code: |-
    mockData.advancedMatching = true;

    // Call runCode to run the template's code.
    runCode(mockData);

    // Verify that the tag finished successfully.
    assertApi('makeTableMap').wasCalledWith(mockData.advancedMatchingList, 'name', 'value');
    assertApi('makeTableMap').wasCalledWith(mockData.objectPropertyList, 'name', 'value');
    assertApi('gtmOnSuccess').wasCalled();
- name: Consent set
  code: |-
    mock('copyFromWindow', key => {
      if (key === 'fbq') return function() {
        if (arguments[0] === 'consent') {
          assertThat(arguments[1], 'Consent set incorrectly').isEqualTo('grant');
        }
      };
    });

    // Call runCode to run the template's code.
    runCode(mockData);

    // Verify that the tag finished successfully.
    assertApi('gtmOnSuccess').wasCalled();
- name: DPO LDU set
  code: |-
    mockData.dpoLDU = true;
    mockData.dpoCountry = '0';
    mockData.dpoState = '0';

    mock('copyFromWindow', key => {
      if (key === 'fbq') return function() {
        if (arguments[0] === 'consent') {
          assertThat(arguments[1], 'Consent set incorrectly').isEqualTo('grant');
        }
        if (arguments[0] === 'dataProcessingOptions') {
          assertThat(arguments[1], 'LDU array value not set').isEqualTo(['LDU']);
          assertThat(arguments[2], 'LDU country not set').isEqualTo(0);
          assertThat(arguments[3], 'LDU state not set').isEqualTo(0);
        }
      };
    });

    // Call runCode to run the template's code.
    runCode(mockData);

    // Verify that the tag finished successfully.
    assertApi('gtmOnSuccess').wasCalled();
- name: DPO LDU not set
  code: |-
    mock('copyFromWindow', key => {
      if (key === 'fbq') return function() {
        if (arguments[0] === 'consent') {
          assertThat(arguments[1], 'Consent set incorrectly').isEqualTo('grant');
        }
        if (arguments[0] === 'dataProcessingOptions') {
          fail('dataProcessingOptions called even though DPO was not set');
        }
      };
    });

    // Call runCode to run the template's code.
    runCode(mockData);

    // Verify that the tag finished successfully.
    assertApi('gtmOnSuccess').wasCalled();
- name: Pixel IDs set - do not initialize
  code: |-
    mock('copyFromWindow', key => {
      if (key === '_fbq_gtm_ids') return ['12345', '23456'];
      if (key === 'fbq') return function() {
        if (arguments[0] === 'init') fail('init called even though pixel IDs already initialized');
      };
    });

    // Call runCode to run the template's code.
    runCode(mockData);

    // Verify that the tag finished successfully.
    assertApi('gtmOnSuccess').wasCalled();
- name: Pixel IDs not set - run init process
  code: "let index = 0;\nlet count = 0;\nlet _fbq_gtm_ids;\n\nmockData.advancedMatching\
    \ = true;\nmockData.disableAutoConfig = true;\nmockData.disablePushState = true;\n\
    \nmock('setInWindow', (key, val) => {\n  if (key === 'fbq.disablePushState') count\
    \ += 1;\n  if (key === '_fbq_gtm_ids') _fbq_gtm_ids = val;\n});\n\nconst initObj\
    \ = {\n  ct: 'Helsinki',\n  cn: 'Finland',\n  external_id: 'UserId'\n};\n\nmock('copyFromWindow',\
    \ key => {\n  if (key === 'fbq') return function() {\n    if (arguments[0] ===\
    \ 'set' && arguments[1] === 'autoConfig' && arguments[2] === false) {\n      assertThat(arguments[3],\
    \ 'autoConfig called with incorrect pixelId').isEqualTo(mockData.pixelId.split(',')[index]);\n\
    \    }\n    if (arguments[0] === 'set' && arguments[1] === 'agent') {\n      assertThat(arguments[2],\
    \ 'agent set with invalid value').isEqualTo('tmSimo-GTM-WebTemplate');\n     \
    \ assertThat(arguments[3], 'agent set with invalid pixel ID').isEqualTo(mockData.pixelId.split(',')[index]);\n\
    \      index += 1;\n    }\n    if (arguments[0] === 'init') {\n      assertThat(arguments[1],\
    \ 'init called with incorrect pixelId').isEqualTo(mockData.pixelId.split(',')[index]);\n\
    \      assertThat(arguments[2], 'init called with incorrect initObj').isEqualTo(initObj);\n\
    \    } \n  };\n});\n\n// Call runCode to run the template's code.\nrunCode(mockData);\n\
    \nassertThat(_fbq_gtm_ids, '_fbq_gtm_ids has incorrect contents').isEqualTo(mockData.pixelId.split(','));\n\
    assertThat(index, 'init called incorrect number of times: ' + index).isEqualTo(2);\n\
    assertThat(count, 'fbq.disablePushState called incorrect number of times: ' +\
    \ count).isEqualTo(2);\n\n// Verify that the tag finished successfully.\nassertApi('gtmOnSuccess').wasCalled();"
- name: Send standard event
  code: "const eventParams = {\n  prop1: 'val1',\n  prop2: 'val2'\n};\n\nlet index\
    \ = 0;\nmock('copyFromWindow', key => {\n  if (key === 'fbq') return function()\
    \ {\n    if (arguments[0] === 'trackSingle') {\n      assertThat(arguments[1],\
    \ 'trackSingle called with incorrect pixel ID').isEqualTo(mockData.pixelId.split(',')[index]);\n\
    \      assertThat(arguments[2], 'trackSingle called with incorrect event name').isEqualTo(mockData.standardEventName);\n\
    \      assertThat(arguments[3], 'trackSingle called with incorrect event parameters').isEqualTo(eventParams);\n\
    \      index += 1;\n    }\n  };\n});\n     \n// Call runCode to run the template's\
    \ code.\nrunCode(mockData);\n\n// Verify that the tag finished successfully.\n\
    assertThat(index, 'trackSingle called incorrect number of times').isEqualTo(2);\n\
    assertApi('gtmOnSuccess').wasCalled();"
- name: Send custom event
  code: "mockData.eventName = 'custom';\n\nconst eventParams = {\n  prop1: 'val1',\n\
    \  prop2: 'val2'\n};\n\nlet index = 0;\nmock('copyFromWindow', key => {\n  if\
    \ (key === 'fbq') return function() {\n    if (arguments[0] === 'trackSingleCustom')\
    \ {\n      assertThat(arguments[1], 'trackSingleCustom called with incorrect pixel\
    \ ID').isEqualTo(mockData.pixelId.split(',')[index]);\n      assertThat(arguments[2],\
    \ 'trackSingleCustom called with incorrect event name').isEqualTo(mockData.customEventName);\n\
    \      assertThat(arguments[3], 'trackSingleCustom called with incorrect event\
    \ parameters').isEqualTo(eventParams);\n      index += 1;\n    }\n  };\n});\n\
    \     \n// Call runCode to run the template's code.\nrunCode(mockData);\n\n//\
    \ Verify that the tag finished successfully.\nassertThat(index, 'trackSingleCustom\
    \ called incorrect number of times').isEqualTo(2);\nassertApi('gtmOnSuccess').wasCalled();"
setup: "const mockData = {\n  pixelId: '12345,23456',\n  eventName: 'standard',\n\
  \  standardEventName: 'PageView',\n  customEventName: 'custom',\n  variableEventName:\
  \ 'standard',\n  consent: true,\n  advancedMatching: false,\n  advancedMatchingList:\
  \ [{name: 'ct', value: 'Helsinki'},{name: 'cn', value: 'Finland'},{name: 'external_id',\
  \ value: 'UserId'}],\n  objectPropertiesFromVariable: false,\n  objectPropertyList:\
  \ [{name: 'prop1', value: 'val1'},{name: 'prop2', value: 'val2'}],\n  disableAutoConfig:\
  \ false,\n  disablePushState: false,\n  enhancedEcommerce: false,\n  eventId: ''\n\
  };\n\nconst mockEec = {\n  gtm: {  \n    products: [{\n      id: 'i1',\n      name:\
  \ 'n1',\n      category: 'c1',\n      price: '1.00',\n      quantity: 1\n    },{\n\
  \      id: 'i2',\n      name: 'n2',\n      category: 'c2',\n      price: '2.00',\n\
  \      quantity: 2\n    }]\n  },\n  fb: {\n    content_type: 'product',\n    contents:\
  \ [{\n      id: 'i1',\n      quantity: 1\n    },{\n      id: 'i2',\n      quantity:\
  \ 2\n    }],\n    currency: 'EUR',\n    value: 5.00\n  }\n};\n\nconst scriptUrl\
  \ = 'https://connect.facebook.net/en_US/fbevents.js';\n\n// Create injectScript\
  \ mock\nlet success, failure;\nmock('injectScript', (url, onsuccess, onfailure)\
  \ => {\n  success = onsuccess;\n  failure = onfailure;\n  onsuccess();\n});\n\n\
  mock('copyFromWindow', key => {\n  if (key === 'fbq') return () => {};\n});"


___NOTES___

Created on 05/09/2023, 16:41:37


